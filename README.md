# README

## Структура проекта

```
.
├── README.md
├── source_data/          # Исходные данные для анализа
├── output_data/          # Результаты выполнения задач 1 и 2
├── task1.ipynb          # Задача 1: Расчет цен и скидок
├── task2.ipynb          # Задача 2: Оптимизация скидок через эластичность
├── task3.ipynb          # Задача 3: Анализ маржинальности по неделям
├── task4.ipynb          # Задача 4: Анатилические ad hoc SQL запросы
└── task5.ipynb          # Задача 5: Расчет WAU по активности пользователей
```

## Задача 1
[task1.ipynb](task1.ipynb)

Рассчитываем базовую цену товара от закупки по справочнику наценок (`base_price`). Далее выбираем целевую конкурентную позицию по цене с приоритетом: быть дешевле минимальной цены рынка (`min-1`), затем дешевле 2-й и 3-й цены (топ-2/топ-3). Скидка задаётся целым процентом (округление вверх), итоговая цена получается из скидки и проверяется на ограничение маржинальности не ниже 10%. Если из-за округления скидки маржа падает ниже 10%, скидка уменьшается на 1 п.п. Для позиций, которые не удаётся вывести в топ-3 по цене при марже ≥10%, ставится минимальная допустимая цена `ceil(cost/0.9)` без изменения наценки.

---

## Задача 2
[task2.ipynb](task2.ipynb)

Оптимизация скидок через моделирование эластичности спроса по цене. Построена логарифмическая модель:
`ln(sales) = a + b * ln(price)`, где `b` — эластичность. На её основе оценивается, какая цена/скидка нужна, чтобы достичь целевого роста продаж(x2).

---

## Задача 3
[task3.ipynb](task3.ipynb)

Анализ продаж **в разрезе брендов** за позапрошлую (14) и прошлую (15) недели. Рассчитаны выручка, валовая прибыль и маржинальность по брендам и в целом. Сформирована короткая аналитическая записка: какие бренды дали основной вклад в изменение выручки/маржинальности и какие факторы могли повлиять. Также предложено действие, которое может дать быстрый эффект.

---

## Задача 4
[task4.ipynb](task4.ipynb)

SQL-запросы для аналитики продаж и пользовательской активности. Решены задачи: расчет среднего чека и доли заказов >5000 руб по категориям, выявление пользователей с заказами в смежные дни (retention), подсчет количества дней с заказами для каждого пользователя. Использованы оконные функции (`LAG`, `LEAD`), агрегации и фильтрация данных.

---

## Задача 5
[task5.ipynb](task5.ipynb)

Расчет Weekly Active Users (WAU) как числа уникальных пользователей, совершивших заказ за **текущий день и предыдущие 6 дней** (7-дневное окно). Реализовано через SQL (диапазон дат / оконная логика) с выводом WAU по дням.

---